# Описание проекта

Заказчик этого исследования — сеть отелей «Как в гостях».

Чтобы привлечь клиентов, эта сеть отелей добавила на свой сайт возможность забронировать номер без предоплаты. Однако если клиент отменял бронирование, то компания терпела убытки. Сотрудники отеля могли, например, закупить продукты к приезду гостя или просто не успеть найти другого клиента.

Чтобы решить эту проблему, нужно разработать систему, которая предсказывает отказ от брони. Если модель покажет, что бронь будет отменена, то клиенту предлагается внести депозит. Размер депозита — 80% от стоимости номера за одни сутки и затрат на разовую уборку. Деньги будут списаны со счёта клиента, если он всё же отменит бронь.

### Бизнес-метрика и другие данные

Основная бизнес-метрика для любой сети отелей — её прибыль. Прибыль отеля — это разница между стоимостью номера за все ночи и затраты на обслуживание: как при подготовке номера, так и при проживании постояльца.

В отеле есть несколько типов номеров. В зависимости от типа номера назначается стоимость за одну ночь. Есть также затраты на уборку. Если клиент снял номер надолго, то убираются каждые два дня.

Стоимость номеров отеля:

- категория A: за ночь — 1 000, разовое обслуживание — 400;
- категория B: за ночь — 800, разовое обслуживание — 350;
- категория C: за ночь — 600, разовое обслуживание — 350;
- категория D: за ночь — 550, разовое обслуживание — 150;
- категория E: за ночь — 500, разовое обслуживание — 150;
- категория F: за ночь — 450, разовое обслуживание — 150;
- категория G: за ночь — 350, разовое обслуживание — 150.

В ценовой политике отеля используются сезонные коэффициенты: весной и осенью цены повышаются на 20%, летом — на 40%.

Убытки отеля в случае отмены брони номера — это стоимость одной уборки и одной ночи с учётом сезонного коэффициента.

На разработку системы прогнозирования заложен бюджет — 400 000. При этом необходимо учесть, что внедрение модели должно окупиться за тестовый период. Затраты на разработку должны быть меньше той выручки, которую система принесёт компании.

# Вывод

В результате исследования были проведены следующие шаги:

1.  Предобработаны данные и проведен исследовательский анализ.
    
    В результате предобработки и исследовательского анализа было выполнено:
    
    - изменены типы данных на оптимальные и оптимизирована память;
    - выявлены и исправлены неявные дубликаты в виде дублированных значений, появившиеся из-за пробелов в написании значений;
    - выбросы в данных заменены на медианные значения или удалены;
    - выбросы в некотых признаках были оставлены, т. к. они являются маркерами «ненадёжного» клиента.
    - в целевом признаке `is_canceled` дисбаланс примерно 63,5% на 36,5%.
2.  Сформулирована ML-задача на основании безнесс метрики.
    
    Бизнесс метрика - это прибыль отеля.
    
    Подсчет прибыли велся из расчет разницы между стоимостью номера за все ночи и затраты на обслуживание: как при подготовке номера, так и при проживании постояльца.
    
3.  Выбрана и обучена лучшая модель для предсказания и подсчитаны варианты прибыли.
    
    В качестве метрики оценки качества использовалась `F1-мера` и метрика `AUC-ROC`. `F1-мера` - это агрегирующая метрика, среднее гармоническое полноты и точности. Метрика `AUC-ROC` показывает, как сильно наша модель отличается от случайной. `AUC-ROC` случайной модели - 0.5.
    
    Лучший результат показала модель решающего дерева с гиперпараметром `class_weight='balanced'`.
    
    Значение `F1-меры` \- 0.657 при глубине 7 и количестве деревьев 9
    
    Значение метрики `AUC-ROC`: 0.821
    
    Построена и визуализирована матрица ошибок. Модель сделала 32138 предсказаний. Из них 75,57% правильных прогнозов.
    
    За счет правильной работы модели удалось добиться прибыли 5 080 184 у.е
    
4.  Сформирован портрет «ненадёжного» клиента.
    
    Ненадежный клиент:
    
    - бронирует номер заранее, в среднем - за 126 дней, в среднем на 3 ночи, но есть значения на 10 ночей - это сразу можно принять во внимание, в среднем это 2 взрослых, на главный маркер если будет 4 взрослых, имеет 3 отменs ранее и 5 изменений заказа, долгое подтверждение заказа - 183 дня, 5 специальных отметок,выбирает самый дорогой номер (A), выбирает только завтрак (ВВ), приезжает из Португалии (PRT), канал дистрибуции - TA/TO.

**Согласно исследованию рекомендуется ввести систему депозитов для клиентов предсказанием по отмени брони.**

# Статус

Проект завершён.